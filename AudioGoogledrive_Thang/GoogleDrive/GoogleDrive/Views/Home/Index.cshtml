@model IEnumerable<GoogleDrive.EF.BaiHat>
@{
    
    var music = (List<GoogleDrive.EF.SoHuu>) ViewBag.MyMusic;
}

<div class="jumbotron">
    <h1>ASP.NET</h1>
    <p class="lead">ASP.NET is a free web framework for building great Web sites and Web applications using HTML, CSS and JavaScript.</p>
    <p><a href="https://asp.net" class="btn btn-primary btn-lg">Learn more &raquo;</a></p>
</div>






<table class="table table-bordered">
    <thead>
        <tr>
            <th>Tên bài hát</th>
            <th>Tác giả </th>
            <th>Mua</th>
            <th>Download</th>
        </tr>
    </thead>
    <tbody>
        
        @foreach (var item in Model)
        {
            var mua = 0;
            foreach(var i in music)
            {
                if (item.IdDrive == i.Idbaihat)
                {
                    mua = 1;
                }
            }
            
            <tr>
            <td><a href="@Url.Action("NgheNhac","Home",new { id = item.IdDrive})">@item.TenBaiHat</a></td>
            <td>@item.Author</td>
            <td>
                @if (mua == 1)
                {
                    <h5>Đã mua</h5>
                }else
                {
                    <h5>
                        @Ajax.ActionLink("Mua", "Buy", new { @id = item.ID}, new AjaxOptions
                   {
                       Confirm = "Mua nhạc?",
                       OnComplete = "$('" + item.ID + "').buy()",
                       HttpMethod = "Post"
                   })
                </h5>
                }


            </td>
                <td>@if (mua == 1)
                {
                    <h5>@Ajax.ActionLink("Download", "DownloadFile", new { @id = item.IdDrive},new AjaxOptions
                   {
                       Confirm = "Tải về ?",
                       OnComplete = "$('" + item.IdDrive + "').download()",
                       HttpMethod = "Post"
                   }
                   )</h5>
                }

                </td>
            </tr>
        }
    </tbody>
</table>


<div class="row">
    <div class="col-md-4">
        <h2>Getting started</h2>
        <p>
            ASP.NET MVC gives you a powerful, patterns-based way to build dynamic websites that
            enables a clean separation of concerns and gives you full control over markup
            for enjoyable, agile development.
        </p>
        <p><a class="btn btn-default" href="https://go.microsoft.com/fwlink/?LinkId=301865">Learn more &raquo;</a></p>
    </div>
    <div class="col-md-4">
        <h2>Get more libraries</h2>
        <p>NuGet is a free Visual Studio extension that makes it easy to add, remove, and update libraries and tools in Visual Studio projects.</p>
        <p><a class="btn btn-default" href="https://go.microsoft.com/fwlink/?LinkId=301866">Learn more &raquo;</a></p>
    </div>
    <div class="col-md-4">
        <h2>Web Hosting</h2>
        <p>You can easily find a web hosting company that offers the right mix of features and price for your applications.</p>
        <p><a class="btn btn-default" href="https://go.microsoft.com/fwlink/?LinkId=301867">Learn more &raquo;</a></p>
    </div>
</div>
